import{o as r,c,F as g,r as k,n as E,a as p,p as x,b as A,d as u,e as j,f as h,g as v,h as T,w as b,v as $,m as D,t as S,i as P,j as F,k as U,T as q,l as O,q as L,s as N,u as z,x as C,y as I,z as K,A as J}from"./vendor-d07baee0.js";const H="modulepreload",W=function(e,t){return new URL(e,t).href},V={},G=function(t,s,n){if(!s||s.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(s.map(a=>{if(a=W(a,n),a in V)return;V[a]=!0;const l=a.endsWith(".css"),d=l?'[rel="stylesheet"]':"";if(!!n)for(let f=i.length-1;f>=0;f--){const w=i[f];if(w.href===a&&(!l||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${d}`))return;const _=document.createElement("link");if(_.rel=l?"stylesheet":H,l||(_.as="script",_.crossOrigin=""),_.href=a,document.head.appendChild(_),l)return new Promise((f,w)=>{_.addEventListener("load",f),_.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>t()).catch(a=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a})};const m=(e,t)=>{const s=e.__vccOpts||e;for(const[n,i]of t)s[n]=i;return s},Q={},X={class:"mf3-loader"};function Y(e,t){return r(),c("i",X)}const B=m(Q,[["render",Y]]);const Z={name:"Actions",props:{actions:{type:[null,Array,Boolean],default:["add","move","del"]}}},M=e=>(x("data-v-deaba4cc"),e=e(),A(),e),ee={key:0,class:"mf3-actions"},te=["onClick"],se=M(()=>u("i",null,null,-1)),ae=M(()=>u("i",null,null,-1)),ne=[se,ae];function ie(e,t,s,n,i,a){return s.actions?.length?(r(),c("div",ee,[(r(!0),c(g,null,k(s.actions,l=>(r(),c("div",{class:E("mf3-actions__action mf3-actions__"+l),onClick:d=>e.$emit("action",l)},ne,10,te))),256))])):p("",!0)}const y=m(Z,[["render",ie],["__scopeId","data-v-deaba4cc"]]);const le={__isStatic:!0,components:{Loader:B,Actions:y},name:"mf:input",props:["type","name","title","label","value","elements","default","list","min","max","minlength","maxlength","size","step","multi","thumb","placeholder","pattern","required","readonly","disabled","trueValue","falseValue","actions"],data(){return this.id="v-"+crypto.getRandomValues(new Uint32Array(1))[0].toString(36),{data:null,loading:!1}},computed:{model:{set(e){let t;this.data&&(Array.isArray(e)?t=[...this.data.filter(s=>e.includes(s.key))]:t={...this.data.filter(s=>s.key===e)[0]||{}}),this.$emit("update:value",e,t)},get(){switch(this.type){case"checkbox":if(this.elements)return this.value===void 0?[]:Array.isArray(this.value)?this.value:[this.value];if(this.value!==void 0)return Array.isArray(this.value)?this.value.toString():this.value;break}return this.value}},inputType(){return["file","image"].includes(this.type)?"text":this.type},bindAttributes(){const e={};return this.trueValue!==void 0&&(e["true-value"]=this.trueValue),this.falseValue!==void 0&&(e["false-value"]=this.falseValue),e}},created(){if(this.elements){if(this.data=[],typeof this.elements=="object"){if(Array.isArray(this.elements))return this.elements;for(const e in this.elements)this.data.push({key:this.elements[e].key||e,...this.elements[e]});return data}if(this.elements[0]==="@"){this.loading=!0,j.post("?a=mf3&action=elements",{elements:this.elements}).then(({data:e})=>{this.data=e}).finally(()=>this.loading=!1);return}for(const e of this.elements.split("||")){const t=e.split("==")[0]??null,s=e.split("==")[1]??null;this.data.push({key:t??s,value:s??t,selected:(this.value??this.default)===(t??s)})}return this.data}},methods:{action(e,t){this.$emit("action",e,t)},updateValue(e){["file","image"].includes(this.type)&&this.$emit("update:value",e.target.value,void 0,this.thumb)},select(e){this.type==="image"?(BrowseServer(e.target.previousElementSibling.id),this.multi&&this.MultiBrowseServer()):this.type==="file"&&BrowseFileServer(e.target.previousElementSibling.id)},MultiBrowseServer(){const e=this;this.interval=setInterval(()=>{window.KCFinder&&(clearInterval(this.interval),window.KCFinder.callBackMultiple=t=>{window.KCFinder=null,window.SetUrl(t.shift());for(let s of t)e.action("add",{value:s})})},100)}}},oe=e=>(x("data-v-99e72d7c"),e=e(),A(),e),re={class:"mf3-items"},ce=["id","type","value","list","min","max","minlength","maxlength","step","size","placeholder","pattern","required","readonly","disabled"],ue=["for"],de=["id","type","list","min","max","minlength","maxlength","step","size","placeholder","pattern","required","readonly","disabled"],me=oe(()=>u("i",null,null,-1)),_e=[me],he=["for"];function fe(e,t,s,n,i,a){const l=h("actions"),d=h("loader");return r(),c("div",{class:E(["mf3-item","mf3-input__"+s.type])},[v(l,{onAction:a.action,actions:s.actions},null,8,["onAction","actions"]),u("div",re,[i.data?(r(),c(g,{key:0},[i.loading?(r(),T(d,{key:0,class:"mf3-loader"})):p("",!0),(r(!0),c(g,null,k(i.data,(o,_)=>(r(),c("div",null,[b(u("input",{"onUpdate:modelValue":t[0]||(t[0]=f=>a.model=f),id:e.id+"-"+_,type:a.inputType,value:o.key,list:o.list,min:o.min,max:o.max,minlength:o.minlength,maxlength:o.maxlength,step:o.step,size:o.size,placeholder:o.placeholder,pattern:o.pattern,required:o.required,readonly:o.readonly,disabled:o.disabled,onChange:t[1]||(t[1]=(...f)=>a.updateValue&&a.updateValue(...f))},null,40,ce),[[$,a.model]]),o.value?(r(),c("label",{key:0,for:e.id+"-"+_},S(o.value),9,ue)):p("",!0)]))),256))],64)):(r(),c(g,{key:1},[b(u("input",D({"onUpdate:modelValue":t[2]||(t[2]=o=>a.model=o),id:e.id,type:a.inputType,list:s.list,min:s.min,max:s.max,minlength:s.minlength,maxlength:s.maxlength,step:s.step,size:s.size,placeholder:s.placeholder,pattern:s.pattern,required:s.required,readonly:s.readonly,disabled:s.disabled},a.bindAttributes,{onChange:t[3]||(t[3]=(...o)=>a.updateValue&&a.updateValue(...o))}),null,16,de),[[$,a.model]]),["file","image"].includes(s.type)?(r(),c("button",{key:0,type:"button",onClick:t[4]||(t[4]=(...o)=>a.select&&a.select(...o))},_e)):p("",!0),s.label?(r(),c("label",{key:1,for:e.id},S(s.label),9,he)):p("",!0)],64))])],2)}const pe=m(le,[["render",fe],["__scopeId","data-v-99e72d7c"]]),ve=Object.freeze(Object.defineProperty({__proto__:null,default:pe},Symbol.toStringTag,{value:"Module"})),ye={components:{Actions:y},__isStatic:!0,name:"mf:richtext"};function ge(e,t,s,n,i,a){return r(),c("div",null,"Richtext")}const be=m(ye,[["render",ge]]),Se=Object.freeze(Object.defineProperty({__proto__:null,default:be},Symbol.toStringTag,{value:"Module"}));const we={name:"Templates",props:["data"],data(){return{isShow:!1}},computed:{templates(){if((this.data||this.data===void 0)&&this.$root.templates&&Object.values(this.$root.templates).length){const e=[];if(this.data===!0||this.data===void 0)for(const t in this.$root.templates)mf3Components[`mf:${this.$root.templates[t].name}`]&&e.push({key:t,title:this.$root.templates[t].title||t});else if(Array.isArray(this.data))for(const t in this.$root.templates)this.data.includes(t)&&e.push({key:t,title:this.$root.templates[t].title||t});if(e.length)return e}}},mounted(){this.templates&&document.addEventListener("click",e=>{e.target.closest(".mf3-templates")!==this.$el&&(this.isShow=!1)})},methods:{open(){this.templates.length===1?this.select(this.templates[0].key):this.isShow=!this.isShow},select(e){this.isShow=!1,this.$emit("select:template",{...this.$root.templates[e]},e)}}},ke={key:0,class:"mf3-templates"},xe={class:"mf3-templates__list"},Ae=["onClick"];function Te(e,t,s,n,i,a){return a.templates?(r(),c("div",ke,[v(q,null,{default:P(()=>[b(u("div",xe,[(r(!0),c(g,null,k(a.templates,l=>(r(),c("div",{onClick:U(d=>a.select(l.key),["stop"])},S(l.title||l.key),9,Ae))),256))],512),[[F,i.isShow]])]),_:1}),u("div",{class:"mf3-templates__add",onClick:t[0]||(t[0]=(...l)=>a.open&&a.open(...l))})])):p("",!0)}const R=m(we,[["render",Te],["__scopeId","data-v-014a7c21"]]);const $e={components:{Templates:R,Actions:y},__isStatic:!0,name:"mf:row",props:{type:String,name:String,title:String,value:[Boolean,String],placeholder:String,items:Array,templates:[Boolean,Array],actions:{type:[Boolean,Array],default:["add","move","del","resize","hide","expand"]},itemsClass:[String,Array],itemsStyle:Object},mounted(){},methods:{action(e){this.$emit("action",e)},selectTemplate(){this.$emit("select:template",...arguments)}}},Ce={class:"mf3-row mf3-group mf3-item"},Ie={key:0,class:"mf3-row__value"},Ve=["value","placeholder"];function Ee(e,t,s,n,i,a){const l=h("actions"),d=h("templates");return r(),c("div",Ce,[v(l,{onAction:a.action,actions:s.actions},null,8,["onAction","actions"]),v(d,{data:s.templates,"onSelect:template":a.selectTemplate},null,8,["data","onSelect:template"]),s.value!==!1?(r(),c("div",Ie,[u("input",{type:"text",value:s.value,placeholder:s.placeholder,onInput:t[0]||(t[0]=o=>e.$emit("update:value",o.target.value))},null,40,Ve)])):p("",!0),O(e.$slots,"default",{},void 0,!0)])}const je=m($e,[["render",Ee],["__scopeId","data-v-88936f76"]]),Oe=Object.freeze(Object.defineProperty({__proto__:null,default:je},Symbol.toStringTag,{value:"Module"}));const ze={components:{Loader:B,Actions:y},__isStatic:!0,name:"mf:select",props:["type","name","title","value","values","elements","default","multiple","size","load","actions"],data(){return{data:this.values&&Object.values(this.values).length?[this.values]:[],loading:!1,focus:!1}},computed:{model:{set(e){this.$emit("update:value",e,{...this.data.filter(t=>t.key===e)[0]||{}})},get(){return this.value||!this.value&&this.multiple&&[]}}},created(){(this.multiple||this.load)&&this.getData()},methods:{action(e){this.$emit("action",e)},getData(){this.elements[0]==="@"?(!this.focus&&!this.load||this.load&&!this.data.length)&&(this.loading=!0,this.data=[],j.post("?a=mf3&action=elements",{elements:this.elements}).then(({data:e})=>{this.data=this.parseData(e)}).finally(()=>this.loading=!1)):this.data=this.parseData(this.elements)},parseData(e){if(Array.isArray(e))return e;const t=[];for(const s of e.split("||")){const n=s.split("==")[0]??null,i=s.split("==")[1]??null;t.push({key:n??i,value:i??n,selected:(this.value??this.default)===(n??i)})}return t}}},Be={class:"mf3-item"},Me={class:"mf3-items"},Re=["size","multiple"],De={key:0},Pe=["value"];function Fe(e,t,s,n,i,a){const l=h("actions"),d=h("loader");return r(),c("div",Be,[v(l,{onAction:a.action,actions:s.actions},null,8,["onAction","actions"]),u("div",Me,[b(u("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>a.model=o),size:s.multiple?s.size||8:1,multiple:s.multiple,onMousedown:t[1]||(t[1]=(...o)=>a.getData&&a.getData(...o)),onFocus:t[2]||(t[2]=()=>i.focus=!0),onBlur:t[3]||(t[3]=()=>i.focus=!1)},[s.multiple?p("",!0):(r(),c("option",De)),(r(!0),c(g,null,k(i.data,o=>(r(),c("option",{value:o.key},S(o.value),9,Pe))),256))],40,Re),[[L,a.model]]),i.loading?(r(),T(d,{key:0,class:"mf3-loader"})):p("",!0)])])}const Ue=m(ze,[["render",Fe],["__scopeId","data-v-e4a09ec3"]]),qe=Object.freeze(Object.defineProperty({__proto__:null,default:Ue},Symbol.toStringTag,{value:"Module"})),Le={components:{Actions:y},__isStatic:!0,name:"mf:table"};function Ne(e,t,s,n,i,a){return r(),c("div",null,"Table")}const Ke=m(Le,[["render",Ne]]),Je=Object.freeze(Object.defineProperty({__proto__:null,default:Ke},Symbol.toStringTag,{value:"Module"}));const He={__isStatic:!0,name:"mf:textarea",components:{Actions:y},props:["type","name","title","value","actions","rows"],methods:{action(e){this.$emit("action",e)},updateValue(e){this.$emit("update:value",e.target.value)}}},We={class:"mf3-item"},Ge={class:"mf3-items"},Qe=["rows"];function Xe(e,t,s,n,i,a){const l=h("actions");return r(),c("div",We,[v(l,{onAction:a.action,actions:s.actions},null,8,["onAction","actions"]),u("div",Ge,[u("textarea",{onInput:t[0]||(t[0]=(...d)=>a.updateValue&&a.updateValue(...d)),rows:s.rows},S(s.value),41,Qe)])])}const Ye=m(He,[["render",Xe],["__scopeId","data-v-65dbaafb"]]),Ze=Object.freeze(Object.defineProperty({__proto__:null,default:Ye},Symbol.toStringTag,{value:"Module"}));const et={components:{Actions:y},__isStatic:!0,name:"mf:thumb:image",props:["type","name","title","value","actions","elements","multi","input"],data(){return{id:"v-"+crypto.getRandomValues(new Uint32Array(1))[0].toString(36)}},computed:{model:{set(e){this.$emit("update:value",e)},get(){return this.value||!this.value&&this.elements&&[]}}},methods:{action(e,t){this.$emit("action",e,t)},updateValue(e){this.$emit("update:value",e.target.value,void 0,this.input)},select(){BrowseServer(this.id),this.multi&&this.MultiBrowseServer()},MultiBrowseServer(){const e=this;this.interval=setInterval(()=>{window.KCFinder&&(clearInterval(this.interval),window.KCFinder.callBackMultiple=t=>{window.KCFinder=null,window.SetUrl(t.shift());for(let s of t)e.action("add",{value:s})})},100)}}},tt=e=>(x("data-v-ea85edb2"),e=e(),A(),e),st=tt(()=>u("i",null,null,-1)),at=[st],nt=["id"];function it(e,t,s,n,i,a){const l=h("actions");return r(),c("div",{class:"mf3-item",style:z({backgroundImage:a.model?"url(../"+a.model+")":null})},[v(l,{onAction:a.action,actions:s.actions},null,8,["onAction","actions"]),u("button",{type:"button",onClick:t[0]||(t[0]=(...d)=>a.select&&a.select(...d))},at),b(u("input",{"onUpdate:modelValue":t[1]||(t[1]=d=>a.model=d),id:this.id,type:"hidden",onChange:t[2]||(t[2]=(...d)=>a.updateValue&&a.updateValue(...d))},null,40,nt),[[N,a.model]])],4)}const lt=m(et,[["render",it],["__scopeId","data-v-ea85edb2"]]),ot=Object.freeze(Object.defineProperty({__proto__:null,default:lt},Symbol.toStringTag,{value:"Module"}));const rt={components:{Actions:y},__isStatic:!0,name:"mf:thumb",props:["type","name","title","value","actions","multi","items"],data(){return{id:"v-"+crypto.getRandomValues(new Uint32Array(1))[0].toString(36)}},methods:{action(e){this.$emit("action",e)}}},ct=e=>(x("data-v-fd7b093e"),e=e(),A(),e),ut=ct(()=>u("button",{type:"button"},[u("i")],-1));function dt(e,t,s,n,i,a){const l=h("actions");return r(),c("div",{class:"mf3-item mf3-thumb",style:z({backgroundImage:s.value?"url(../"+s.value+")":null})},[v(l,{onAction:a.action,actions:s.actions},null,8,["onAction","actions"]),ut,O(e.$slots,"default",{},void 0,!0)],4)}const mt=m(rt,[["render",dt],["__scopeId","data-v-fd7b093e"]]),_t=Object.freeze(Object.defineProperty({__proto__:null,default:mt},Symbol.toStringTag,{value:"Module"}));const ht={name:"mf",components:{Templates:R,Actions:y,draggable:C},props:["dataEl","tvId","tvName"],data(){return this.data=window.mf3Config[this.tvName]??{},{elements:this.setElements(),settings:this.setSettings(),templates:this.setTemplates()}},watch:{elements:{handler(e){this.dataEl.innerHTML=e.length?JSON.stringify(this.setData(e)):""},deep:!0}},methods:{setElements(){return this.setElementFromTemplates(this.dataEl.value&&JSON.parse(this.dataEl.value)||[],this.data.templates)},setElementFromTemplates(e,t){return t=typeof t=="object"?Array.isArray(t)?Object.fromEntries(t.map(s=>[s.key,s])):t:{},e.forEach(s=>{let n={};return t[s.key]&&(n={...t[s.key]},n.items?(s.items=this.setElementFromTemplates(s.items||[],n.items),delete n.items):s.items&&delete s.items,n.value!==void 0&&(n.value===!1?delete s.value:delete n.value)),Object.assign(s,n)}),e},setSettings(){return this.data?.settings||{}},setTemplates(){if(this.data?.templates){let e;return Array.isArray(this.data.templates)&&(e={},this.data.templates.forEach(t=>{t.key&&(e[t.key]=t)})),e||this.data.templates}},getElements(e,t){return I(C,{tag:"div",list:e,itemKey:s=>s,class:["mf3-items",t?.itemsClass],style:t?.itemsStyle,handle:".mf3-actions__move",ghostClass:"mf3-draggable__active",chosenClass:"mf3-draggable__chosen"},{item:({element:s,index:n})=>this.getElement(s,n,e)})},getElement(e,t,s){const n=e.name?"mf:"+e.name:null;return mf3Components[n]&&I(mf3Components[n],{...e,onAction:(i,...a)=>this.action(i,s,t,...a),"onUpdate:value":(...i)=>this.updateValue(e,s,...i),"onSelect:template":(...i)=>this.selectTemplate(e,...i)},e?.items&&(()=>this.getElements(e.items,e)))},action(e,t,s,n){switch(e){case"del":t.splice(s,1);break;case"add":t.splice(s+1,0,this.clearValue({...t[s]})),n&&Object.assign(t[s+1],n);break}},updateValue(e,t,s,n,i){e.value=s,e.values=n,i!==void 0&&(i=typeof i!="object"?[i]:i,t.forEach(a=>{i.includes(a.key)&&(a.value=s)}))},selectTemplate(e,t,s){s!==void 0?(e.items||(e.items=[]),e.items.push(t)):this.elements.push(e)},clearValue(e){return e.value!==void 0&&(e.value=""),e.items&&(e.items=e.items.map(t=>this.clearValue({...t}))),e},setData(e){e=Object.assign([],e);for(let t in e){const s=Object.assign({},e[t]);for(const n in s)["id","key","type","name","value","values","default","items"].includes(n)||delete s[n];s?.items&&(s.items=this.setData(s.items)),e[t]=s}return e}}},ft={class:"mf3 mf3-group"};function pt(e,t,s,n,i,a){const l=h("templates");return r(),c("div",ft,[v(l,{data:!0,"onSelect:template":a.selectTemplate},null,8,["onSelect:template"]),(r(),T(K(()=>a.getElements(i.elements)),{key:0}))])}const vt=m(ht,[["render",pt],["__scopeId","data-v-144353f2"]]);G(()=>Promise.resolve({}),["./mf-62c85264.css"],import.meta.url);window.mf3Components={};Object.entries(Object.assign({"./components/Input/Input.vue":ve,"./components/Richtext/Richtext.vue":Se,"./components/Row/Row.vue":Oe,"./components/Select/Select.vue":qe,"./components/Table/Table.vue":Je,"./components/Textarea/Textarea.vue":Ze,"./components/Thumb/Image.vue":ot,"./components/Thumb/Thumb.vue":_t})).forEach(([,{default:e}])=>{(e?.__isStatic||e?.extends?.__isStatic)&&(window.mf3Components[e.name||e.__name]=e)});document.querySelectorAll(".mf3-data").forEach(e=>{const t=document.createElement("div");J(vt,{dataEl:e,tvId:e.dataset.tvId,tvName:e.dataset.tvName}).mount(t),e.after(t)});
