import{o as r,c,F as g,r as k,n as E,a as p,p as x,b as T,d as u,e as j,f as h,g as v,h as A,w as b,v as $,m as D,t as S,i as P,j as F,k as U,T as q,l as O,q as L,s as N,u as z,x as C,y as I,z as K,A as J}from"./vendor-d07baee0.js";const H="modulepreload",W=function(e,t){return new URL(e,t).href},V={},G=function(t,s,i){if(!s||s.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(s.map(n=>{if(n=W(n,i),n in V)return;V[n]=!0;const l=n.endsWith(".css"),d=l?'[rel="stylesheet"]':"";if(!!i)for(let f=a.length-1;f>=0;f--){const w=a[f];if(w.href===n&&(!l||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${d}`))return;const _=document.createElement("link");if(_.rel=l?"stylesheet":H,l||(_.as="script",_.crossOrigin=""),_.href=n,document.head.appendChild(_),l)return new Promise((f,w)=>{_.addEventListener("load",f),_.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>t()).catch(n=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=n,window.dispatchEvent(l),!l.defaultPrevented)throw n})};const m=(e,t)=>{const s=e.__vccOpts||e;for(const[i,a]of t)s[i]=a;return s},Q={},X={class:"mf3-loader"};function Y(e,t){return r(),c("i",X)}const M=m(Q,[["render",Y]]);const Z={name:"Actions",props:{actions:{type:[null,Array,Boolean],default:["add","move","del"]}}},B=e=>(x("data-v-03640298"),e=e(),T(),e),ee={key:0,class:"mf3-actions"},te=["onClick"],se=B(()=>u("i",null,null,-1)),ne=B(()=>u("i",null,null,-1)),ae=[se,ne];function ie(e,t,s,i,a,n){return s.actions?.length?(r(),c("div",ee,[(r(!0),c(g,null,k(s.actions,l=>(r(),c("div",{class:E("mf3-actions__action mf3-actions__"+l),onClick:d=>e.$emit("action",l)},ae,10,te))),256))])):p("",!0)}const y=m(Z,[["render",ie],["__scopeId","data-v-03640298"]]);const le={__isStatic:!0,components:{Loader:M,Actions:y},name:"mf:input",props:["type","name","title","label","value","elements","default","list","min","max","minlength","maxlength","size","step","multi","thumb","placeholder","pattern","required","readonly","disabled","trueValue","falseValue","actions"],data(){return this.id="v-"+crypto.getRandomValues(new Uint32Array(1))[0].toString(36),{data:null,loading:!1}},computed:{model:{set(e){let t;this.data&&(Array.isArray(e)?t=[...this.data.filter(s=>e.includes(s.key))]:t={...this.data.filter(s=>s.key===e)[0]||{}}),this.$emit("update:value",e,t)},get(){switch(this.type){case"checkbox":if(this.elements)return this.value===void 0?[]:Array.isArray(this.value)?this.value:[this.value];if(this.value!==void 0)return Array.isArray(this.value)?this.value.toString():this.value;break}return this.value}},inputType(){return["file","image"].includes(this.type)?"text":this.type},bindAttributes(){const e={};return this.trueValue!==void 0&&(e["true-value"]=this.trueValue),this.falseValue!==void 0&&(e["false-value"]=this.falseValue),e}},created(){if(this.elements){if(this.data=[],typeof this.elements=="object"){if(Array.isArray(this.elements))return this.elements;for(const e in this.elements)this.data.push({key:this.elements[e].key||e,...this.elements[e]});return data}if(this.elements[0]==="@"){this.loading=!0,j.post("?a=mf3&action=elements",{elements:this.elements}).then(({data:e})=>{this.data=e}).finally(()=>this.loading=!1);return}for(const e of this.elements.split("||")){const t=e.split("==")[0]??null,s=e.split("==")[1]??null;this.data.push({key:t??s,value:s??t,selected:(this.value??this.default)===(t??s)})}return this.data}},methods:{action(e,t){this.$emit("action",e,t)},updateValue(e){["file","image"].includes(this.type)&&this.$emit("update:value",e.target.value,void 0,this.thumb)},select(e){this.type==="image"?(BrowseServer(e.target.previousElementSibling.id),this.multi&&this.MultiBrowseServer()):this.type==="file"&&BrowseFileServer(e.target.previousElementSibling.id)},MultiBrowseServer(){const e=this;this.interval=setInterval(()=>{window.KCFinder&&(clearInterval(this.interval),window.KCFinder.callBackMultiple=t=>{window.KCFinder=null,window.SetUrl(t.shift());for(let s of t)e.action("add",{value:s})})},100)}}},oe=e=>(x("data-v-d3b8b71d"),e=e(),T(),e),re={class:"mf3-items"},ce=["id","type","value","list","min","max","minlength","maxlength","step","size","placeholder","pattern","required","readonly","disabled"],ue=["for"],de=["id","type","list","min","max","minlength","maxlength","step","size","placeholder","pattern","required","readonly","disabled"],me=oe(()=>u("i",null,null,-1)),_e=[me],he=["for"];function fe(e,t,s,i,a,n){const l=h("actions"),d=h("loader");return r(),c("div",{class:E(["mf3-item","mf3-input__"+s.type])},[v(l,{onAction:n.action,actions:s.actions},null,8,["onAction","actions"]),u("div",re,[a.data?(r(),c(g,{key:0},[a.loading?(r(),A(d,{key:0,class:"mf3-loader"})):p("",!0),(r(!0),c(g,null,k(a.data,(o,_)=>(r(),c("div",null,[b(u("input",{"onUpdate:modelValue":t[0]||(t[0]=f=>n.model=f),id:e.id+"-"+_,type:n.inputType,value:o.key,list:o.list,min:o.min,max:o.max,minlength:o.minlength,maxlength:o.maxlength,step:o.step,size:o.size,placeholder:o.placeholder,pattern:o.pattern,required:o.required,readonly:o.readonly,disabled:o.disabled,onChange:t[1]||(t[1]=(...f)=>n.updateValue&&n.updateValue(...f))},null,40,ce),[[$,n.model]]),o.value?(r(),c("label",{key:0,for:e.id+"-"+_},S(o.value),9,ue)):p("",!0)]))),256))],64)):(r(),c(g,{key:1},[b(u("input",D({"onUpdate:modelValue":t[2]||(t[2]=o=>n.model=o),id:e.id,type:n.inputType,list:s.list,min:s.min,max:s.max,minlength:s.minlength,maxlength:s.maxlength,step:s.step,size:s.size,placeholder:s.placeholder,pattern:s.pattern,required:s.required,readonly:s.readonly,disabled:s.disabled},n.bindAttributes,{onChange:t[3]||(t[3]=(...o)=>n.updateValue&&n.updateValue(...o))}),null,16,de),[[$,n.model]]),["file","image"].includes(s.type)?(r(),c("button",{key:0,type:"button",onClick:t[4]||(t[4]=(...o)=>n.select&&n.select(...o))},_e)):p("",!0),s.label?(r(),c("label",{key:1,for:e.id},S(s.label),9,he)):p("",!0)],64))])],2)}const pe=m(le,[["render",fe],["__scopeId","data-v-d3b8b71d"]]),ve=Object.freeze(Object.defineProperty({__proto__:null,default:pe},Symbol.toStringTag,{value:"Module"})),ye={components:{Actions:y},__isStatic:!0,name:"mf:richtext"};function ge(e,t,s,i,a,n){return r(),c("div",null,"Richtext")}const be=m(ye,[["render",ge]]),Se=Object.freeze(Object.defineProperty({__proto__:null,default:be},Symbol.toStringTag,{value:"Module"}));const we={name:"Templates",props:["data"],data(){return{isShow:!1}},computed:{templates(){if((this.data||this.data===void 0)&&this.$root.templates&&Object.values(this.$root.templates).length){const e=[];if(this.data===!0||this.data===void 0)for(const t in this.$root.templates)mf3Components[`mf:${this.$root.templates[t].name}`]&&e.push({key:t,title:this.$root.templates[t].title||t});else if(Array.isArray(this.data))for(const t in this.$root.templates)this.data.includes(t)&&e.push({key:t,title:this.$root.templates[t].title||t});if(e.length)return e}}},mounted(){this.templates&&document.addEventListener("click",e=>{e.target.closest(".mf3-templates")!==this.$el&&(this.isShow=!1)})},methods:{open(){this.templates.length===1?this.select(this.templates[0].key):this.isShow=!this.isShow},select(e){this.isShow=!1,this.$emit("select:template",{...this.$root.templates[e]},e)}}},ke={key:0,class:"mf3-templates"},xe={class:"mf3-templates__list"},Te=["onClick"];function Ae(e,t,s,i,a,n){return n.templates?(r(),c("div",ke,[v(q,null,{default:P(()=>[b(u("div",xe,[(r(!0),c(g,null,k(n.templates,l=>(r(),c("div",{onClick:U(d=>n.select(l.key),["stop"])},S(l.title||l.key),9,Te))),256))],512),[[F,a.isShow]])]),_:1}),u("div",{class:"mf3-templates__add",onClick:t[0]||(t[0]=(...l)=>n.open&&n.open(...l))})])):p("",!0)}const R=m(we,[["render",Ae],["__scopeId","data-v-014a7c21"]]);const $e={components:{Templates:R,Actions:y},__isStatic:!0,name:"mf:row",props:["type","name","title","value","placeholder","items","templates","actions","itemsClass","itemsStyle"],mounted(){},methods:{action(e){this.$emit("action",e)},selectTemplate(){this.$emit("select:template",...arguments)}}},Ce={class:"mf3-row mf3-group mf3-item"},Ie={key:0,class:"mf3-row__value"},Ve=["value","placeholder"];function Ee(e,t,s,i,a,n){const l=h("actions"),d=h("templates");return r(),c("div",Ce,[v(l,{onAction:n.action,actions:s.actions},null,8,["onAction","actions"]),v(d,{data:s.templates,"onSelect:template":n.selectTemplate},null,8,["data","onSelect:template"]),s.value!==!1?(r(),c("div",Ie,[u("input",{type:"text",value:s.value,placeholder:s.placeholder,onInput:t[0]||(t[0]=o=>e.$emit("update:value",o.target.value))},null,40,Ve)])):p("",!0),O(e.$slots,"default",{},void 0,!0)])}const je=m($e,[["render",Ee],["__scopeId","data-v-70589432"]]),Oe=Object.freeze(Object.defineProperty({__proto__:null,default:je},Symbol.toStringTag,{value:"Module"}));const ze={components:{Loader:M,Actions:y},__isStatic:!0,name:"mf:select",props:["type","name","title","value","values","elements","default","multiple","size","load","actions"],data(){return{data:this.values&&Object.values(this.values).length?[this.values]:[],loading:!1,focus:!1}},computed:{model:{set(e){this.$emit("update:value",e,{...this.data.filter(t=>t.key===e)[0]||{}})},get(){return this.value||!this.value&&this.multiple&&[]}}},created(){(this.multiple||this.load)&&this.getData()},methods:{action(e){this.$emit("action",e)},getData(){this.elements[0]==="@"?(!this.focus&&!this.load||this.load&&!this.data.length)&&(this.loading=!0,this.data=[],j.post("?a=mf3&action=elements",{elements:this.elements}).then(({data:e})=>{this.data=this.parseData(e)}).finally(()=>this.loading=!1)):this.data=this.parseData(this.elements)},parseData(e){if(Array.isArray(e))return e;const t=[];for(const s of e.split("||")){const i=s.split("==")[0]??null,a=s.split("==")[1]??null;t.push({key:i??a,value:a??i,selected:(this.value??this.default)===(i??a)})}return t}}},Me={class:"mf3-item"},Be={class:"mf3-items"},Re=["size","multiple"],De={key:0},Pe=["value"];function Fe(e,t,s,i,a,n){const l=h("actions"),d=h("loader");return r(),c("div",Me,[v(l,{onAction:n.action,actions:s.actions},null,8,["onAction","actions"]),u("div",Be,[b(u("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>n.model=o),size:s.multiple?s.size||8:1,multiple:s.multiple,onMousedown:t[1]||(t[1]=(...o)=>n.getData&&n.getData(...o)),onFocus:t[2]||(t[2]=()=>a.focus=!0),onBlur:t[3]||(t[3]=()=>a.focus=!1)},[s.multiple?p("",!0):(r(),c("option",De)),(r(!0),c(g,null,k(a.data,o=>(r(),c("option",{value:o.key},S(o.value),9,Pe))),256))],40,Re),[[L,n.model]]),a.loading?(r(),A(d,{key:0,class:"mf3-loader"})):p("",!0)])])}const Ue=m(ze,[["render",Fe],["__scopeId","data-v-e4a09ec3"]]),qe=Object.freeze(Object.defineProperty({__proto__:null,default:Ue},Symbol.toStringTag,{value:"Module"})),Le={components:{Actions:y},__isStatic:!0,name:"mf:table"};function Ne(e,t,s,i,a,n){return r(),c("div",null,"Table")}const Ke=m(Le,[["render",Ne]]),Je=Object.freeze(Object.defineProperty({__proto__:null,default:Ke},Symbol.toStringTag,{value:"Module"}));const He={__isStatic:!0,name:"mf:textarea",components:{Actions:y},props:["type","name","title","value","actions","rows"],methods:{action(e){this.$emit("action",e)},updateValue(e){this.$emit("update:value",e.target.value)}}},We={class:"mf3-item"},Ge={class:"mf3-items"},Qe=["rows"];function Xe(e,t,s,i,a,n){const l=h("actions");return r(),c("div",We,[v(l,{onAction:n.action,actions:s.actions},null,8,["onAction","actions"]),u("div",Ge,[u("textarea",{onInput:t[0]||(t[0]=(...d)=>n.updateValue&&n.updateValue(...d)),rows:s.rows},S(s.value),41,Qe)])])}const Ye=m(He,[["render",Xe],["__scopeId","data-v-65dbaafb"]]),Ze=Object.freeze(Object.defineProperty({__proto__:null,default:Ye},Symbol.toStringTag,{value:"Module"}));const et={components:{Actions:y},__isStatic:!0,name:"mf:thumb:image",props:["type","name","title","value","actions","elements","multi","input"],data(){return{id:"v-"+crypto.getRandomValues(new Uint32Array(1))[0].toString(36)}},computed:{model:{set(e){this.$emit("update:value",e)},get(){return this.value||!this.value&&this.elements&&[]}}},methods:{action(e,t){this.$emit("action",e,t)},updateValue(e){this.$emit("update:value",e.target.value,void 0,this.input)},select(){BrowseServer(this.id),this.multi&&this.MultiBrowseServer()},MultiBrowseServer(){const e=this;this.interval=setInterval(()=>{window.KCFinder&&(clearInterval(this.interval),window.KCFinder.callBackMultiple=t=>{window.KCFinder=null,window.SetUrl(t.shift());for(let s of t)e.action("add",{value:s})})},100)}}},tt=e=>(x("data-v-ea85edb2"),e=e(),T(),e),st=tt(()=>u("i",null,null,-1)),nt=[st],at=["id"];function it(e,t,s,i,a,n){const l=h("actions");return r(),c("div",{class:"mf3-item",style:z({backgroundImage:n.model?"url(../"+n.model+")":null})},[v(l,{onAction:n.action,actions:s.actions},null,8,["onAction","actions"]),u("button",{type:"button",onClick:t[0]||(t[0]=(...d)=>n.select&&n.select(...d))},nt),b(u("input",{"onUpdate:modelValue":t[1]||(t[1]=d=>n.model=d),id:this.id,type:"hidden",onChange:t[2]||(t[2]=(...d)=>n.updateValue&&n.updateValue(...d))},null,40,at),[[N,n.model]])],4)}const lt=m(et,[["render",it],["__scopeId","data-v-ea85edb2"]]),ot=Object.freeze(Object.defineProperty({__proto__:null,default:lt},Symbol.toStringTag,{value:"Module"}));const rt={components:{Actions:y},__isStatic:!0,name:"mf:thumb",props:["type","name","title","value","actions","multi","items"],data(){return{id:"v-"+crypto.getRandomValues(new Uint32Array(1))[0].toString(36)}},methods:{action(e){this.$emit("action",e)}}},ct=e=>(x("data-v-fd7b093e"),e=e(),T(),e),ut=ct(()=>u("button",{type:"button"},[u("i")],-1));function dt(e,t,s,i,a,n){const l=h("actions");return r(),c("div",{class:"mf3-item mf3-thumb",style:z({backgroundImage:s.value?"url(../"+s.value+")":null})},[v(l,{onAction:n.action,actions:s.actions},null,8,["onAction","actions"]),ut,O(e.$slots,"default",{},void 0,!0)],4)}const mt=m(rt,[["render",dt],["__scopeId","data-v-fd7b093e"]]),_t=Object.freeze(Object.defineProperty({__proto__:null,default:mt},Symbol.toStringTag,{value:"Module"}));const ht={name:"mf",components:{Templates:R,Actions:y,draggable:C},props:["dataEl","tvId","tvName"],data(){return this.data=window.mf3Config[this.tvName]??{},{elements:this.setElements(),settings:this.setSettings(),templates:this.setTemplates()}},watch:{elements:{handler(e){this.dataEl.innerHTML=e.length?JSON.stringify(this.setData(e)):""},deep:!0}},methods:{setElements(){return this.setElementFromTemplates(this.dataEl.value&&JSON.parse(this.dataEl.value)||[],this.data.templates)},setElementFromTemplates(e,t){return t=typeof t=="object"?Array.isArray(t)?Object.fromEntries(t.map(s=>[s.key,s])):t:{},e.forEach(s=>{let i={};return t[s.key]&&(i={...t[s.key]},i.items?(s.items=this.setElementFromTemplates(s.items||[],i.items),delete i.items):s.items&&delete s.items),Object.assign(s,i)}),e},setSettings(){return this.data?.settings||{}},setTemplates(){if(this.data?.templates){let e;return Array.isArray(this.data.templates)&&(e={},this.data.templates.forEach(t=>{t.key&&(e[t.key]=t)})),e||this.data.templates}},getElements(e,t){return I(C,{tag:"div",list:e,itemKey:s=>s,class:["mf3-items",t?.itemsClass],style:t?.itemsStyle,handle:".mf3-actions__move",ghostClass:"mf3-draggable__active",chosenClass:"mf3-draggable__chosen"},{item:({element:s,index:i})=>this.getElement(s,i,e)})},getElement(e,t,s){const i=e.name?"mf:"+e.name:null;if(mf3Components[i])return I(mf3Components[i],{...e,onAction:(a,...n)=>this.action(a,s,t,...n),"onUpdate:value":(...a)=>this.updateValue(e,s,...a),"onSelect:template":(...a)=>this.selectTemplate(e,...a)},e?.items&&(()=>this.getElements(e.items,e)))},action(e,t,s,i){switch(e){case"del":t.splice(s,1);break;case"add":t.splice(s+1,0,this.clearValue({...t[s]})),i&&Object.assign(t[s+1],i);break}},updateValue(e,t,s,i,a){e.value=s,e.values=i,a!==void 0&&(a=typeof a!="object"?[a]:a,t.forEach(n=>{a.includes(n.key)&&(n.value=s)}))},selectTemplate(e,t,s){s!==void 0?(e.items||(e.items=[]),e.items.push(t)):this.elements.push(e)},clearValue(e){return e.value!==void 0&&(e.value=""),e.items&&(e.items=e.items.map(t=>this.clearValue({...t}))),e},setData(e){e=Object.assign([],e);for(let t in e){const s=Object.assign({},e[t]);for(const i in s)["id","key","type","name","value","values","default","items"].includes(i)||delete s[i];s?.items&&(s.items=this.setData(s.items)),e[t]=s}return e}}},ft={class:"mf3 mf3-group"};function pt(e,t,s,i,a,n){const l=h("templates");return r(),c("div",ft,[v(l,{data:!0,"onSelect:template":n.selectTemplate},null,8,["onSelect:template"]),(r(),A(K(()=>n.getElements(a.elements)),{key:0}))])}const vt=m(ht,[["render",pt],["__scopeId","data-v-07762ce7"]]);G(()=>Promise.resolve({}),["./mf-62c85264.css"],import.meta.url);window.mf3Components={};Object.entries(Object.assign({"./components/Input/Input.vue":ve,"./components/Richtext/Richtext.vue":Se,"./components/Row/Row.vue":Oe,"./components/Select/Select.vue":qe,"./components/Table/Table.vue":Je,"./components/Textarea/Textarea.vue":Ze,"./components/Thumb/Image.vue":ot,"./components/Thumb/Thumb.vue":_t})).forEach(([,{default:e}])=>{(e?.__isStatic||e?.extends?.__isStatic)&&(window.mf3Components[e.name||e.__name]=e)});document.querySelectorAll(".mf3-data").forEach(e=>{const t=document.createElement("div");J(vt,{dataEl:e,tvId:e.dataset.tvId,tvName:e.dataset.tvName}).mount(t),e.after(t)});
