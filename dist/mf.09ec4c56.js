import{o as r,c,a as h,F as g,r as k,n as E,p as x,b as A,d as u,e as j,f,g as v,h as T,w as b,v as $,m as D,t as S,i as P,j as F,k as U,T as q,l as O,q as L,s as N,u as z,x as C,y as I,z as K,A as J}from"./vendor.54efe6c8.js";const H="modulepreload",W=function(e,t){return new URL(e,t).href},V={},G=function(t,s,i){if(!s||s.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(s.map(a=>{if(a=W(a,i),a in V)return;V[a]=!0;const l=a.endsWith(".css"),d=l?'[rel="stylesheet"]':"";if(!!i)for(let p=n.length-1;p>=0;p--){const w=n[p];if(w.href===a&&(!l||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${d}`))return;const m=document.createElement("link");if(m.rel=l?"stylesheet":H,l||(m.as="script",m.crossOrigin=""),m.href=a,document.head.appendChild(m),l)return new Promise((p,w)=>{m.addEventListener("load",p),m.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>t()).catch(a=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a})};const _=(e,t)=>{const s=e.__vccOpts||e;for(const[i,n]of t)s[i]=n;return s},Q={},X={class:"mf3-loader"};function Y(e,t){return r(),c("i",X)}const B=_(Q,[["render",Y]]);const Z={name:"Actions",props:{actions:{type:[null,Array,Boolean],default:["add","move","del"]}}},M=e=>(x("data-v-0e56aa46"),e=e(),A(),e),ee={key:0,class:"mf3-actions"},te={key:0,class:"mf3-actions__"},se=["onClick"],ae=M(()=>u("i",null,null,-1)),ne=M(()=>u("i",null,null,-1)),ie=[ae,ne];function le(e,t,s,i,n,a){return s.actions?.length?(r(),c("div",ee,[s.actions.filter(l=>l!=="add").length?(r(),c("div",te)):h("",!0),(r(!0),c(g,null,k(s.actions,l=>(r(),c("div",{class:E("mf3-actions__action mf3-actions__"+l),onClick:d=>e.$emit("action",l)},ie,10,se))),256))])):h("",!0)}const y=_(Z,[["render",le],["__scopeId","data-v-0e56aa46"]]);const oe={__isStatic:!0,components:{Loader:B,Actions:y},name:"mf:input",props:["type","name","title","label","value","elements","default","list","min","max","minlength","maxlength","size","step","multi","thumb","placeholder","pattern","required","readonly","disabled","trueValue","falseValue","actions"],data(){return this.id="v-"+crypto.getRandomValues(new Uint32Array(1))[0].toString(36),{data:null,loading:!1}},computed:{model:{set(e){let t;this.data&&(Array.isArray(e)?t=[...this.data.filter(s=>e.includes(s.key))]:t={...this.data.filter(s=>s.key===e)[0]||{}}),this.$emit("update:value",e,t)},get(){switch(this.type){case"checkbox":if(this.elements)return this.value===void 0?[]:Array.isArray(this.value)?this.value:[this.value];if(this.value!==void 0)return Array.isArray(this.value)?this.value.toString():this.value;break}return this.value}},inputType(){return["file","image"].includes(this.type)?"text":this.type},bindAttributes(){const e={};return this.trueValue!==void 0&&(e["true-value"]=this.trueValue),this.falseValue!==void 0&&(e["false-value"]=this.falseValue),e}},created(){if(this.elements){if(this.data=[],typeof this.elements=="object"){if(Array.isArray(this.elements))return this.elements;for(const e in this.elements)this.data.push({key:this.elements[e].key||e,...this.elements[e]});return data}if(this.elements[0]==="@"){this.loading=!0,j.post("?a=mf3&action=elements",{elements:this.elements}).then(({data:e})=>{this.data=e}).finally(()=>this.loading=!1);return}for(const e of this.elements.split("||")){const t=e.split("==")[0]??null,s=e.split("==")[1]??null;this.data.push({key:t??s,value:s??t,selected:(this.value??this.default)===(t??s)})}return this.data}},methods:{action(e,t){this.$emit("action",e,t)},updateValue(e){["file","image"].includes(this.type)&&this.$emit("update:value",e.target.value,void 0,this.thumb)},select(e){this.type==="image"?(BrowseServer(e.target.previousElementSibling.id),this.multi&&this.MultiBrowseServer()):this.type==="file"&&BrowseFileServer(e.target.previousElementSibling.id)},MultiBrowseServer(){const e=this;this.interval=setInterval(()=>{window.KCFinder&&(clearInterval(this.interval),window.KCFinder.callBackMultiple=t=>{window.KCFinder=null,window.SetUrl(t.shift());for(let s of t)e.action("add",{value:s})})},100)}}},re=e=>(x("data-v-99e72d7c"),e=e(),A(),e),ce={class:"mf3-items"},ue=["id","type","value","list","min","max","minlength","maxlength","step","size","placeholder","pattern","required","readonly","disabled"],de=["for"],_e=["id","type","list","min","max","minlength","maxlength","step","size","placeholder","pattern","required","readonly","disabled"],me=re(()=>u("i",null,null,-1)),he=[me],fe=["for"];function pe(e,t,s,i,n,a){const l=f("actions"),d=f("loader");return r(),c("div",{class:E(["mf3-item","mf3-input__"+s.type])},[v(l,{onAction:a.action,actions:s.actions},null,8,["onAction","actions"]),u("div",ce,[n.data?(r(),c(g,{key:0},[n.loading?(r(),T(d,{key:0,class:"mf3-loader"})):h("",!0),(r(!0),c(g,null,k(n.data,(o,m)=>(r(),c("div",null,[b(u("input",{"onUpdate:modelValue":t[0]||(t[0]=p=>a.model=p),id:e.id+"-"+m,type:a.inputType,value:o.key,list:o.list,min:o.min,max:o.max,minlength:o.minlength,maxlength:o.maxlength,step:o.step,size:o.size,placeholder:o.placeholder,pattern:o.pattern,required:o.required,readonly:o.readonly,disabled:o.disabled,onChange:t[1]||(t[1]=(...p)=>a.updateValue&&a.updateValue(...p))},null,40,ue),[[$,a.model]]),o.value?(r(),c("label",{key:0,for:e.id+"-"+m},S(o.value),9,de)):h("",!0)]))),256))],64)):(r(),c(g,{key:1},[b(u("input",D({"onUpdate:modelValue":t[2]||(t[2]=o=>a.model=o),id:e.id,type:a.inputType,list:s.list,min:s.min,max:s.max,minlength:s.minlength,maxlength:s.maxlength,step:s.step,size:s.size,placeholder:s.placeholder,pattern:s.pattern,required:s.required,readonly:s.readonly,disabled:s.disabled},a.bindAttributes,{onChange:t[3]||(t[3]=(...o)=>a.updateValue&&a.updateValue(...o))}),null,16,_e),[[$,a.model]]),["file","image"].includes(s.type)?(r(),c("button",{key:0,type:"button",onClick:t[4]||(t[4]=(...o)=>a.select&&a.select(...o))},he)):h("",!0),s.label?(r(),c("label",{key:1,for:e.id},S(s.label),9,fe)):h("",!0)],64))])],2)}const ve=_(oe,[["render",pe],["__scopeId","data-v-99e72d7c"]]),ye=Object.freeze(Object.defineProperty({__proto__:null,default:ve},Symbol.toStringTag,{value:"Module"})),ge={components:{Actions:y},__isStatic:!0,name:"mf:richtext"};function be(e,t,s,i,n,a){return r(),c("div",null,"Richtext")}const Se=_(ge,[["render",be]]),we=Object.freeze(Object.defineProperty({__proto__:null,default:Se},Symbol.toStringTag,{value:"Module"}));const ke={name:"Templates",props:["data"],data(){return{isShow:!1}},computed:{templates(){if((this.data||this.data===void 0)&&this.$root.templates&&Object.values(this.$root.templates).length){const e=[];if(this.data===!0||this.data===void 0)for(const t in this.$root.templates)mf3Components[`mf:${this.$root.templates[t].name}`]&&e.push({key:t,title:this.$root.templates[t].title||t});else if(Array.isArray(this.data))for(const t in this.$root.templates)this.data.includes(t)&&e.push({key:t,title:this.$root.templates[t].title||t});if(e.length)return e}}},mounted(){this.templates&&document.addEventListener("click",e=>{e.target.closest(".mf3-templates")!==this.$el&&(this.isShow=!1)})},methods:{open(){this.templates.length===1?this.select(this.templates[0].key):this.isShow=!this.isShow},select(e){this.isShow=!1,this.$emit("select:template",{...this.$root.templates[e]},e)}}},xe={key:0,class:"mf3-templates"},Ae={class:"mf3-templates__list"},Te=["onClick"];function $e(e,t,s,i,n,a){return a.templates?(r(),c("div",xe,[v(q,null,{default:P(()=>[b(u("div",Ae,[(r(!0),c(g,null,k(a.templates,l=>(r(),c("div",{onClick:U(d=>a.select(l.key),["stop"])},S(l.title||l.key),9,Te))),256))],512),[[F,n.isShow]])]),_:1}),u("div",{class:"mf3-templates__add",onClick:t[0]||(t[0]=(...l)=>a.open&&a.open(...l))})])):h("",!0)}const R=_(ke,[["render",$e],["__scopeId","data-v-014a7c21"]]);const Ce={components:{Templates:R,Actions:y},__isStatic:!0,name:"mf:row",props:{type:String,name:String,title:String,value:{type:[Boolean,String],default:void 0},placeholder:String,items:Array,templates:{type:[Boolean,Array],default:!0},actions:{type:[Boolean,Array],default:["add","move","resize","hide","expand","del"]},itemsClass:[String,Array],itemsStyle:Object},methods:{action(e){this.$emit("action",e)},selectTemplate(){this.$emit("select:template",...arguments)}}},Ie={class:"mf3-row mf3-group mf3-item"},Ve={key:0,class:"mf3-row__value"},Ee=["value","placeholder"];function je(e,t,s,i,n,a){const l=f("actions"),d=f("templates");return r(),c("div",Ie,[v(l,{onAction:a.action,actions:s.actions},null,8,["onAction","actions"]),v(d,{data:s.templates,"onSelect:template":a.selectTemplate},null,8,["data","onSelect:template"]),s.value!==!1?(r(),c("div",Ve,[u("input",{type:"text",value:s.value,placeholder:s.placeholder,onInput:t[0]||(t[0]=o=>e.$emit("update:value",o.target.value))},null,40,Ee)])):h("",!0),O(e.$slots,"default",{},void 0,!0)])}const Oe=_(Ce,[["render",je],["__scopeId","data-v-76797278"]]),ze=Object.freeze(Object.defineProperty({__proto__:null,default:Oe},Symbol.toStringTag,{value:"Module"}));const Be={components:{Loader:B,Actions:y},__isStatic:!0,name:"mf:select",props:["type","name","title","value","values","elements","default","multiple","size","load","actions"],data(){return{data:this.values&&Object.values(this.values).length?[this.values]:[],loading:!1,focus:!1}},computed:{model:{set(e){this.$emit("update:value",e,{...this.data.filter(t=>t.key===e)[0]||{}})},get(){return this.value||!this.value&&this.multiple&&[]}}},created(){(this.multiple||this.load)&&this.getData()},methods:{action(e){this.$emit("action",e)},getData(){this.elements[0]==="@"?(!this.focus&&!this.load||this.load&&!this.data.length)&&(this.loading=!0,this.data=[],j.post("?a=mf3&action=elements",{elements:this.elements}).then(({data:e})=>{this.data=this.parseData(e)}).finally(()=>this.loading=!1)):this.data=this.parseData(this.elements)},parseData(e){if(Array.isArray(e))return e;const t=[];for(const s of e.split("||")){const i=s.split("==")[0]??null,n=s.split("==")[1]??null;t.push({key:i??n,value:n??i,selected:(this.value??this.default)===(i??n)})}return t}}},Me={class:"mf3-item"},Re={class:"mf3-items"},De=["size","multiple"],Pe={key:0},Fe=["value"];function Ue(e,t,s,i,n,a){const l=f("actions"),d=f("loader");return r(),c("div",Me,[v(l,{onAction:a.action,actions:s.actions},null,8,["onAction","actions"]),u("div",Re,[b(u("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>a.model=o),size:s.multiple?s.size||8:1,multiple:s.multiple,onMousedown:t[1]||(t[1]=(...o)=>a.getData&&a.getData(...o)),onFocus:t[2]||(t[2]=()=>n.focus=!0),onBlur:t[3]||(t[3]=()=>n.focus=!1)},[s.multiple?h("",!0):(r(),c("option",Pe)),(r(!0),c(g,null,k(n.data,o=>(r(),c("option",{value:o.key},S(o.value),9,Fe))),256))],40,De),[[L,a.model]]),n.loading?(r(),T(d,{key:0,class:"mf3-loader"})):h("",!0)])])}const qe=_(Be,[["render",Ue],["__scopeId","data-v-e4a09ec3"]]),Le=Object.freeze(Object.defineProperty({__proto__:null,default:qe},Symbol.toStringTag,{value:"Module"})),Ne={components:{Actions:y},__isStatic:!0,name:"mf:table"};function Ke(e,t,s,i,n,a){return r(),c("div",null,"Table")}const Je=_(Ne,[["render",Ke]]),He=Object.freeze(Object.defineProperty({__proto__:null,default:Je},Symbol.toStringTag,{value:"Module"}));const We={__isStatic:!0,name:"mf:textarea",components:{Actions:y},props:["type","name","title","value","actions","rows"],methods:{action(e){this.$emit("action",e)},updateValue(e){this.$emit("update:value",e.target.value)}}},Ge={class:"mf3-item"},Qe={class:"mf3-items"},Xe=["rows"];function Ye(e,t,s,i,n,a){const l=f("actions");return r(),c("div",Ge,[v(l,{onAction:a.action,actions:s.actions},null,8,["onAction","actions"]),u("div",Qe,[u("textarea",{onInput:t[0]||(t[0]=(...d)=>a.updateValue&&a.updateValue(...d)),rows:s.rows},S(s.value),41,Xe)])])}const Ze=_(We,[["render",Ye],["__scopeId","data-v-65dbaafb"]]),et=Object.freeze(Object.defineProperty({__proto__:null,default:Ze},Symbol.toStringTag,{value:"Module"}));const tt={components:{Actions:y},__isStatic:!0,name:"mf:thumb:image",props:["type","name","title","value","actions","elements","multi","input"],data(){return{id:"v-"+crypto.getRandomValues(new Uint32Array(1))[0].toString(36)}},computed:{model:{set(e){this.$emit("update:value",e)},get(){return this.value||!this.value&&this.elements&&[]}}},methods:{action(e,t){this.$emit("action",e,t)},updateValue(e){this.$emit("update:value",e.target.value,void 0,this.input)},select(){BrowseServer(this.id),this.multi&&this.MultiBrowseServer()},MultiBrowseServer(){const e=this;this.interval=setInterval(()=>{window.KCFinder&&(clearInterval(this.interval),window.KCFinder.callBackMultiple=t=>{window.KCFinder=null,window.SetUrl(t.shift());for(let s of t)e.action("add",{value:s})})},100)}}},st=e=>(x("data-v-ea85edb2"),e=e(),A(),e),at=st(()=>u("i",null,null,-1)),nt=[at],it=["id"];function lt(e,t,s,i,n,a){const l=f("actions");return r(),c("div",{class:"mf3-item",style:z({backgroundImage:a.model?"url(../"+a.model+")":null})},[v(l,{onAction:a.action,actions:s.actions},null,8,["onAction","actions"]),u("button",{type:"button",onClick:t[0]||(t[0]=(...d)=>a.select&&a.select(...d))},nt),b(u("input",{"onUpdate:modelValue":t[1]||(t[1]=d=>a.model=d),id:this.id,type:"hidden",onChange:t[2]||(t[2]=(...d)=>a.updateValue&&a.updateValue(...d))},null,40,it),[[N,a.model]])],4)}const ot=_(tt,[["render",lt],["__scopeId","data-v-ea85edb2"]]),rt=Object.freeze(Object.defineProperty({__proto__:null,default:ot},Symbol.toStringTag,{value:"Module"}));const ct={components:{Actions:y},__isStatic:!0,name:"mf:thumb",props:["type","name","title","value","actions","multi","items"],data(){return{id:"v-"+crypto.getRandomValues(new Uint32Array(1))[0].toString(36)}},methods:{action(e){this.$emit("action",e)}}},ut=e=>(x("data-v-fd7b093e"),e=e(),A(),e),dt=ut(()=>u("button",{type:"button"},[u("i")],-1));function _t(e,t,s,i,n,a){const l=f("actions");return r(),c("div",{class:"mf3-item mf3-thumb",style:z({backgroundImage:s.value?"url(../"+s.value+")":null})},[v(l,{onAction:a.action,actions:s.actions},null,8,["onAction","actions"]),dt,O(e.$slots,"default",{},void 0,!0)],4)}const mt=_(ct,[["render",_t],["__scopeId","data-v-fd7b093e"]]),ht=Object.freeze(Object.defineProperty({__proto__:null,default:mt},Symbol.toStringTag,{value:"Module"}));const ft={name:"mf",components:{Templates:R,Actions:y,draggable:C},props:["dataEl","tvId","tvName"],data(){return this.data=window.mf3Config[this.tvName]??{},{templates:this.setTemplates(),settings:this.setSettings(),elements:null}},watch:{elements:{handler(e){this.dataEl.innerHTML=e.length?JSON.stringify(this.setData(e)):""},deep:!0}},created(){this.elements=this.setElements()},methods:{setElements(){return this.setElementFromTemplates(this.dataEl.value&&JSON.parse(this.dataEl.value)||[],this.data.templates)},setElementFromTemplates(e,t){return t=typeof t=="object"?Array.isArray(t)?Object.fromEntries(t.map(s=>[s.key,s])):t:{},e.forEach(s=>{let i=this.templates?.[s.key]??t?.[s.key]??null;if(i){i={...i};const n=i.items||s.items;n&&(s.items=this.setElementFromTemplates(s.items||[],n)),i.value!==void 0&&(i.value===!1?delete s.value:delete i.value),Object.assign(s,i)}return s}),e},setSettings(){return this.data?.settings||{}},setTemplates(){if(this.data?.templates){let e;return Array.isArray(this.data.templates)&&(e={},this.data.templates.forEach(t=>{t.key&&(e[t.key]=t)})),e||this.data.templates}},getElements(e,t){return I(C,{tag:"div",list:e,itemKey:s=>s,class:["mf3-items",t?.itemsClass],style:t?.itemsStyle,handle:".mf3-actions__move",ghostClass:"mf3-draggable__active",chosenClass:"mf3-draggable__chosen"},{item:({element:s,index:i})=>this.getElement(s,i,e)})},getElement(e,t,s){const i=e.name?"mf:"+e.name:null;return mf3Components[i]&&I(mf3Components[i],{...e,onAction:(n,...a)=>this.action(n,s,t,...a),"onUpdate:value":(...n)=>this.updateValue(e,s,...n),"onSelect:template":(...n)=>this.selectTemplate(e,...n)},e?.items&&(()=>this.getElements(e.items,e)))},action(e,t,s,i){switch(e){case"del":t.splice(s,1);break;case"add":t.splice(s+1,0,this.clearValue({...t[s]})),i&&Object.assign(t[s+1],i);break}},updateValue(e,t,s,i,n){e.value=s,e.values=i,n!==void 0&&(n=typeof n!="object"?[n]:n,t.forEach(a=>{n.includes(a.key)&&(a.value=s)}))},selectTemplate(e,t,s){s!==void 0?(e.items||(e.items=[]),e.items.push(t)):this.elements.push(e)},clearValue(e){return e.value!==void 0&&(e.value=""),e.items&&(e.items=e.items.map(t=>this.clearValue({...t}))),e},setData(e){e=Object.assign([],e);for(let t in e){const s=Object.assign({},e[t]);for(const i in s)["id","key","type","name","value","values","default","items"].includes(i)||delete s[i];s?.items&&(s.items=this.setData(s.items)),e[t]=s}return e}}},pt={class:"mf3 mf3-group"};function vt(e,t,s,i,n,a){const l=f("templates");return r(),c("div",pt,[v(l,{data:!0,"onSelect:template":a.selectTemplate},null,8,["onSelect:template"]),(r(),T(K(()=>a.getElements(n.elements)),{key:0}))])}const yt=_(ft,[["render",vt],["__scopeId","data-v-f5e8950c"]]);G(()=>Promise.resolve({}),["./mf.62c85264.css"],import.meta.url);window.mf3Components={};Object.entries(Object.assign({"./components/Input/Input.vue":ye,"./components/Richtext/Richtext.vue":we,"./components/Row/Row.vue":ze,"./components/Select/Select.vue":Le,"./components/Table/Table.vue":He,"./components/Textarea/Textarea.vue":et,"./components/Thumb/Image.vue":rt,"./components/Thumb/Thumb.vue":ht})).forEach(([,{default:e}])=>{(e?.__isStatic||e?.extends?.__isStatic)&&(window.mf3Components[e.name||e.__name]=e)});document.querySelectorAll(".mf3-data").forEach(e=>{const t=document.createElement("div");J(yt,{dataEl:e,tvId:e.dataset.tvId,tvName:e.dataset.tvName}).mount(t),e.after(t)});
