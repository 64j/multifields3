import{o as r,c as u,a as f,F as g,r as k,n as A,w as R,p as x,b as T,d,e as O,f as y,g as $,h as w,v as C,m as D,t as b,i as p,j as I,k as P,l as F,q,s as E,u as V,x as L,y as U}from"./vendor.50dea423.js";const N="modulepreload",K=function(e,t){return new URL(e,t).href},j={},J=function(t,s,i){if(!s||s.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(s.map(a=>{if(a=K(a,i),a in j)return;j[a]=!0;const l=a.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(!!i)for(let h=n.length-1;h>=0;h--){const S=n[h];if(S.href===a&&(!l||S.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${c}`))return;const _=document.createElement("link");if(_.rel=l?"stylesheet":N,l||(_.as="script",_.crossOrigin=""),_.href=a,document.head.appendChild(_),l)return new Promise((h,S)=>{_.addEventListener("load",h),_.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>t()).catch(a=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a})};const m=(e,t)=>{const s=e.__vccOpts||e;for(const[i,n]of t)s[i]=n;return s},H={},W={class:"mf3-loader"};function G(e,t){return r(),u("i",W)}const B=m(H,[["render",G]]);const Q={name:"Actions",props:{actions:{type:[null,Array,Boolean],default:["add","move","del"]}}},M=e=>(x("data-v-b60f4621"),e=e(),T(),e),X={key:0,class:"mf3-actions"},Y=["data-title"],Z=["onClick"],ee=M(()=>d("i",null,null,-1)),te=M(()=>d("i",null,null,-1)),se=[ee,te];function ae(e,t,s,i,n,a){return s.actions?.length?(r(),u("div",X,[s.actions.filter(l=>l!=="add").length?(r(),u("div",{key:0,class:"mf3-actions__panel","data-title":e.$parent.title},null,8,Y)):f("",!0),(r(!0),u(g,null,k(s.actions,l=>(r(),u("div",{class:A("mf3-actions__action mf3-actions__"+l),onClick:R(c=>e.$emit("action",l),["stop"])},se,10,Z))),256))])):f("",!0)}const v=m(Q,[["render",ae],["__scopeId","data-v-b60f4621"]]);const ne={name:"mf:input",__isStatic:!0,components:{Loader:B,Actions:v},props:["key","type","name","title","label","value","elements","default","list","min","max","minlength","maxlength","size","step","multi","thumb","placeholder","pattern","required","readonly","disabled","trueValue","falseValue","actions"],data(){return this.id="v-"+crypto.getRandomValues(new Uint32Array(1))[0].toString(36),{data:null,loading:!1}},computed:{model:{set(e){let t;this.data&&(Array.isArray(e)?t=[...this.data.filter(s=>e.includes(s.key))]:t={...this.data.filter(s=>s.key===e)[0]||{}}),this.$emit("update:value",e,t)},get(){switch(this.type){case"checkbox":if(this.elements)return this.value===void 0?[]:Array.isArray(this.value)?this.value:[this.value];if(this.value!==void 0)return Array.isArray(this.value)?this.value.toString():this.value;break}return this.value}},inputType(){return["file","image"].includes(this.type)?"text":this.type},bindAttributes(){const e={};return this.trueValue!==void 0&&(e["true-value"]=this.trueValue),this.falseValue!==void 0&&(e["false-value"]=this.falseValue),e}},created(){if(this.elements){if(this.data=[],typeof this.elements=="object"){if(Array.isArray(this.elements))return this.elements;for(const e in this.elements)this.data.push({key:this.elements[e].key||e,...this.elements[e]});return data}if(this.elements[0]==="@"){this.loading=!0,O.post("?a=mf3&action=elements",{elements:this.elements}).then(({data:e})=>{this.data=e}).finally(()=>this.loading=!1);return}for(const e of this.elements.split("||")){const t=e.split("==")[0]??null,s=e.split("==")[1]??null;this.data.push({key:t??s,value:s??t,selected:(this.value??this.default)===(t??s)})}return this.data}},methods:{action(e,t){this.$emit("action",e,t)},updateValue(e){["file","image"].includes(this.type)&&this.$emit("update:value",e.target.value,void 0,this.thumb)},select(e){this.type==="image"?(BrowseServer(e.target.previousElementSibling.id),this.multi&&this.MultiBrowseServer()):this.type==="file"&&BrowseFileServer(e.target.previousElementSibling.id)},MultiBrowseServer(){const e=this;this.interval=setInterval(()=>{window.KCFinder&&(clearInterval(this.interval),window.KCFinder.callBackMultiple=t=>{window.KCFinder=null,window.SetUrl(t.shift());for(let s of t)e.action("add",{value:s})})},100)}}},ie=e=>(x("data-v-ba180b8e"),e=e(),T(),e),le={class:"mf3-items"},oe=["id","type","value","list","min","max","minlength","maxlength","step","size","placeholder","pattern","required","readonly","disabled"],re=["for"],ue=["id","type","list","min","max","minlength","maxlength","step","size","placeholder","pattern","required","readonly","disabled"],ce=ie(()=>d("i",null,null,-1)),de=[ce],me=["for"];function _e(e,t,s,i,n,a){const l=p("actions"),c=p("loader");return r(),u("div",{class:A(["mf3-item","mf3-input__"+s.type])},[y(l,{onAction:a.action,actions:s.actions},null,8,["onAction","actions"]),d("div",le,[n.data?(r(),u(g,{key:0},[n.loading?(r(),$(c,{key:0,class:"mf3-loader"})):f("",!0),(r(!0),u(g,null,k(n.data,(o,_)=>(r(),u("div",null,[w(d("input",{"onUpdate:modelValue":t[0]||(t[0]=h=>a.model=h),id:e.id+"-"+_,type:a.inputType,value:o.key,list:o.list,min:o.min,max:o.max,minlength:o.minlength,maxlength:o.maxlength,step:o.step,size:o.size,placeholder:o.placeholder,pattern:o.pattern,required:o.required,readonly:o.readonly,disabled:o.disabled,onChange:t[1]||(t[1]=(...h)=>a.updateValue&&a.updateValue(...h))},null,40,oe),[[C,a.model]]),o.value?(r(),u("label",{key:0,for:e.id+"-"+_},b(o.value),9,re)):f("",!0)]))),256))],64)):(r(),u(g,{key:1},[w(d("input",D({"onUpdate:modelValue":t[2]||(t[2]=o=>a.model=o),id:e.id,type:a.inputType,list:s.list,min:s.min,max:s.max,minlength:s.minlength,maxlength:s.maxlength,step:s.step,size:s.size,placeholder:s.placeholder,pattern:s.pattern,required:s.required,readonly:s.readonly,disabled:s.disabled},a.bindAttributes,{onChange:t[3]||(t[3]=(...o)=>a.updateValue&&a.updateValue(...o))}),null,16,ue),[[C,a.model]]),["file","image"].includes(s.type)?(r(),u("button",{key:0,type:"button",onClick:t[4]||(t[4]=(...o)=>a.select&&a.select(...o))},de)):f("",!0),s.label?(r(),u("label",{key:1,for:e.id},b(s.label),9,me)):f("",!0)],64))])],2)}const fe=m(ne,[["render",_e],["__scopeId","data-v-ba180b8e"]]),he=Object.freeze(Object.defineProperty({__proto__:null,default:fe},Symbol.toStringTag,{value:"Module"})),pe={name:"mf:richtext",__isStatic:!0,components:{Actions:v}};function ve(e,t,s,i,n,a){return r(),u("div",null,"Richtext")}const ye=m(pe,[["render",ve]]),ge=Object.freeze(Object.defineProperty({__proto__:null,default:ye},Symbol.toStringTag,{value:"Module"}));const be={name:"Templates",props:["data"],computed:{templates(){if((this.data||this.data===void 0)&&this.$root.templates&&Object.values(this.$root.templates).length){const e=[];if(this.data===!0||this.data===void 0)for(const t in this.$root.templates)mf3Components[`mf:${this.$root.templates[t].name}`]&&e.push({key:t,title:this.$root.templates[t].title||t});else if(Array.isArray(this.data))for(const t in this.$root.templates)this.data.includes(t)&&e.push({key:t,title:this.$root.templates[t].title||t});if(e.length)return e}}},methods:{open(){this.templates.length===1&&this.select(this.templates[0].key)},select(e){this.$emit("select:template",{...this.$root.templates[e]},e)}}},Se={key:0,class:"mf3-templates"},we={class:"mf3-templates__list"},ke=["onMousedown"];function Ae(e,t,s,i,n,a){return a.templates?(r(),u("div",Se,[d("button",{type:"button",class:"mf3-templates__add",onClick:t[0]||(t[0]=(...l)=>a.open&&a.open(...l))}),d("div",we,[(r(!0),u(g,null,k(a.templates,l=>(r(),u("div",{onMousedown:c=>a.select(l.key)},b(l.title||l.key),41,ke))),256))])])):f("",!0)}const z=m(be,[["render",Ae],["__scopeId","data-v-8ec384e7"]]);const xe={name:"mf:row",__isStatic:!0,components:{Templates:z,Actions:v},props:{key:String,type:String,name:String,title:String,value:{type:[Boolean,String],default:void 0},placeholder:String,items:Array,templates:{type:[Boolean,Array],default:!0},actions:{type:[Boolean,Array],default:["add","move","resize","hide","expand","del"]},itemsClass:[String,Array],itemsStyle:Object},methods:{action(e){this.$emit("action",e)},selectTemplate(){this.$emit("select:template",...arguments)}}},Te={class:"mf3-row mf3-group mf3-item"},$e={key:0,class:"mf3-row__value"},Ce=["value","placeholder"];function Ee(e,t,s,i,n,a){const l=p("actions"),c=p("templates");return r(),u("div",Te,[y(l,{onAction:a.action,actions:s.actions},null,8,["onAction","actions"]),y(c,{data:s.templates,"onSelect:template":a.selectTemplate},null,8,["data","onSelect:template"]),s.value!==!1?(r(),u("div",$e,[d("input",{type:"text",value:s.value,placeholder:s.placeholder,onInput:t[0]||(t[0]=o=>e.$emit("update:value",o.target.value))},null,40,Ce)])):f("",!0),I(e.$slots,"default",{},void 0,!0)])}const Ve=m(xe,[["render",Ee],["__scopeId","data-v-984582ee"]]),je=Object.freeze(Object.defineProperty({__proto__:null,default:Ve},Symbol.toStringTag,{value:"Module"}));const Oe={name:"mf:select",__isStatic:!0,components:{Loader:B,Actions:v},props:["key","type","name","title","value","values","elements","default","multiple","size","load","actions"],data(){return{data:this.values&&Object.values(this.values).length?[this.values]:[],loading:!1,focus:!1}},computed:{model:{set(e){this.$emit("update:value",e,{...this.data.filter(t=>t.key===e)[0]||{}})},get(){return this.value||!this.value&&this.multiple&&[]}}},created(){(this.multiple||this.load)&&this.getData()},methods:{action(e){this.$emit("action",e)},getData(){this.elements[0]==="@"?(!this.focus&&!this.load||this.load&&!this.data.length)&&(this.loading=!0,this.data=[],O.post("?a=mf3&action=elements",{elements:this.elements}).then(({data:e})=>{this.data=this.parseData(e)}).finally(()=>this.loading=!1)):this.data=this.parseData(this.elements)},parseData(e){if(Array.isArray(e))return e;const t=[];for(const s of e.split("||")){const i=s.split("==")[0]??null,n=s.split("==")[1]??null;t.push({key:i??n,value:n??i,selected:(this.value??this.default)===(i??n)})}return t}}},Ie={class:"mf3-item"},Be={class:"mf3-items"},Me=["size","multiple"],ze={key:0},Re=["value"];function De(e,t,s,i,n,a){const l=p("actions"),c=p("loader");return r(),u("div",Ie,[y(l,{onAction:a.action,actions:s.actions},null,8,["onAction","actions"]),d("div",Be,[n.loading?(r(),$(c,{key:0,class:"mf3-loader"})):f("",!0),w(d("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>a.model=o),size:s.multiple?s.size||8:1,multiple:s.multiple,onMousedown:t[1]||(t[1]=(...o)=>a.getData&&a.getData(...o)),onFocus:t[2]||(t[2]=()=>n.focus=!0),onBlur:t[3]||(t[3]=()=>n.focus=!1)},[s.multiple?f("",!0):(r(),u("option",ze)),(r(!0),u(g,null,k(n.data,o=>(r(),u("option",{value:o.key},b(o.value),9,Re))),256))],40,Me),[[P,a.model]])])])}const Pe=m(Oe,[["render",De],["__scopeId","data-v-05efb76f"]]),Fe=Object.freeze(Object.defineProperty({__proto__:null,default:Pe},Symbol.toStringTag,{value:"Module"})),qe={name:"mf:table",__isStatic:!0,components:{Actions:v}};function Le(e,t,s,i,n,a){return r(),u("div",null,"Table")}const Ue=m(qe,[["render",Le]]),Ne=Object.freeze(Object.defineProperty({__proto__:null,default:Ue},Symbol.toStringTag,{value:"Module"}));const Ke={name:"mf:textarea",__isStatic:!0,components:{Actions:v},props:["key","type","name","title","value","actions","rows"],methods:{action(e){this.$emit("action",e)},updateValue(e){this.$emit("update:value",e.target.value)}}},Je={class:"mf3-item"},He={class:"mf3-items"},We=["rows"];function Ge(e,t,s,i,n,a){const l=p("actions");return r(),u("div",Je,[y(l,{onAction:a.action,actions:s.actions},null,8,["onAction","actions"]),d("div",He,[d("textarea",{onInput:t[0]||(t[0]=(...c)=>a.updateValue&&a.updateValue(...c)),rows:s.rows},b(s.value),41,We)])])}const Qe=m(Ke,[["render",Ge],["__scopeId","data-v-bd30dde7"]]),Xe=Object.freeze(Object.defineProperty({__proto__:null,default:Qe},Symbol.toStringTag,{value:"Module"}));const Ye={name:"mf:thumb",__isStatic:!0,components:{Actions:v},props:{key:String,type:{type:String,default:"thumb"},name:String,title:String,value:String,actions:Array,elements:[String,Array],multi:Boolean,input:String,items:Array},data(){return{id:"v-"+crypto.getRandomValues(new Uint32Array(1))[0].toString(36)}},computed:{model:{set(e){this.$emit("update:value",e)},get(){return this.value||!this.value&&this.elements&&[]}}},methods:{action(e,...t){this.$emit("action",e,...t)},updateValue(e){this.$emit("update:value",e.target.value,void 0,this.input)},select(){BrowseServer(this.id),this.multi&&this.MultiBrowseServer()},MultiBrowseServer(){const e=this;this.interval=setInterval(()=>{window.KCFinder&&(clearInterval(this.interval),window.KCFinder.callBackMultiple=t=>{window.KCFinder=null,window.SetUrl(t.shift());for(let s of t)e.action("add",{value:s})})},100)}}},Ze=e=>(x("data-v-9cfa637a"),e=e(),T(),e),et=Ze(()=>d("i",null,null,-1)),tt=[et],st=["id"];function at(e,t,s,i,n,a){const l=p("actions");return r(),u("div",{class:A(["mf3-item mf3-thumb","mf3-thumb__"+this.type]),style:q({backgroundImage:s.value?"url(../"+s.value+")":null})},[y(l,{onAction:a.action,actions:s.actions},null,8,["onAction","actions"]),d("button",{type:"button",onClick:t[0]||(t[0]=(...c)=>a.select&&a.select(...c))},tt),w(d("input",{"onUpdate:modelValue":t[1]||(t[1]=c=>a.model=c),id:this.id,type:"hidden",onChange:t[2]||(t[2]=(...c)=>a.updateValue&&a.updateValue(...c))},null,40,st),[[F,a.model]]),I(e.$slots,"default",{},void 0,!0)],6)}const nt=m(Ye,[["render",at],["__scopeId","data-v-9cfa637a"]]),it=Object.freeze(Object.defineProperty({__proto__:null,default:nt},Symbol.toStringTag,{value:"Module"}));const lt={name:"mf",components:{Templates:z,Actions:v,draggable:E},props:["dataEl","tvId","tvName"],data(){return this.data=window.mf3Config[this.tvName]??{},{templates:this.setTemplates(),settings:this.setSettings(),elements:null}},watch:{elements:{handler(e){this.dataEl.innerHTML=e.length?JSON.stringify(this.setData(e)):""},deep:!0}},created(){this.elements=this.setElements()},methods:{setElements(){return this.setElementFromTemplates(this.dataEl.value&&JSON.parse(this.dataEl.value)||[],this.data.templates)},setElementFromTemplates(e,t){return t=typeof t=="object"?Array.isArray(t)?Object.fromEntries(t.map(s=>[s.key,s])):t:{},e.forEach(s=>{let i=this.templates?.[s.key]??t?.[s.key]??null;if(i){i={...i};const n=i.items||s.items;n&&(s.items=this.setElementFromTemplates(s.items||[],n)),i.value!==void 0&&(i.value===!1?delete s.value:delete i.value),Object.assign(s,i)}return s}),e},setSettings(){return this.data?.settings||{}},setTemplates(){if(this.data?.templates){let e;return Array.isArray(this.data.templates)&&(e={},this.data.templates.forEach(t=>{t.key&&(e[t.key]=t)})),e||this.data.templates}},getElements(e,t){return V(E,{tag:"div",list:e,itemKey:s=>s,class:["mf3-items",t?.itemsClass],style:t?.itemsStyle,handle:".mf3-actions__move",ghostClass:"mf3-draggable__active",chosenClass:"mf3-draggable__chosen"},{item:({element:s,index:i})=>this.getElement(s,i,e)})},getElement(e,t,s){const i=e.name?"mf:"+e.name:null;return mf3Components[i]&&V(mf3Components[i],{...e,onAction:(n,...a)=>this.action(n,s,t,...a),"onUpdate:value":(...n)=>this.updateValue(e,s,...n),"onSelect:template":(...n)=>this.selectTemplate(e,...n),onClick:this.select},e?.items&&(()=>this.getElements(e.items,e)))},action(e,t,s,i){switch(e){case"del":t.splice(s,1);break;case"add":t.splice(s+1,0,this.clearValue({...t[s]})),i&&Object.assign(t[s+1],i);break}},updateValue(e,t,s,i,n){e.value=s,e.values=i,n!==void 0&&(n=typeof n!="object"?[n]:n,t.forEach(a=>{n.includes(a.key)&&(a.value=s)}))},selectTemplate(e,t,s){s!==void 0?(e.items||(e.items=[]),e.items.push(t)):this.elements.push(e)},clearValue(e){return e.value!==void 0&&(e.value=""),e.items&&(e.items=e.items.map(t=>this.clearValue({...t}))),e},setData(e){e=Object.assign([],e);for(let t in e){const s=Object.assign({},e[t]);for(const i in s)["id","key","type","name","value","values","default","items"].includes(i)||delete s[i];s?.items&&(s.items=this.setData(s.items)),e[t]=s}return e},select(e){this.$el.querySelectorAll(".mf3-item.active").forEach(t=>t.classList.remove("active")),e.currentTarget.classList.add("active"),e.stopPropagation()}}},ot={class:"mf3 mf3-group"};function rt(e,t,s,i,n,a){const l=p("templates");return r(),u("div",ot,[y(l,{data:!0,"onSelect:template":a.selectTemplate},null,8,["onSelect:template"]),(r(),$(L(()=>a.getElements(n.elements)),{key:0}))])}const ut=m(lt,[["render",rt],["__scopeId","data-v-9acc9af7"]]);J(()=>Promise.resolve({}),["./mf.f0e2b7ee.css"],import.meta.url);window.mf3Components={};Object.entries(Object.assign({"./components/Input/Input.vue":he,"./components/Richtext/Richtext.vue":ge,"./components/Row/Row.vue":je,"./components/Select/Select.vue":Fe,"./components/Table/Table.vue":Ne,"./components/Textarea/Textarea.vue":Xe,"./components/Thumb/Thumb.vue":it})).forEach(([,{default:e}])=>{(e?.__isStatic||e?.extends?.__isStatic)&&(window.mf3Components[e.name||e.__name]=e)});document.querySelectorAll(".mf3-data").forEach(e=>{const t=document.createElement("div");U(ut,{dataEl:e,tvId:e.dataset.tvId,tvName:e.dataset.tvName}).mount(t),e.after(t)});
